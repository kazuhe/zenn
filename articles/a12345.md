---
title: "チーム開発で活きる調査メモのすすめ"
emoji: "🐧"
type: "idea"
topics: ["チーム開発"]
published: true
---

# はじめに

自分が知らない何かを調べる時、どの様に調べていますか？

ソフトウェア開発では、自分やチームが有している知識で解決できる問題もあれば、現状の知識だけでは解決できない問題も多くあると思います。

その様なシーンで行うことは、問題を解決するために必要な知識や手法を調べることだと思います。

私は調べた課程を記録することが重要であろうと思っており、この記事では記録する際に意識すると良いだろうと思っている観点について文字にしてみようと思います。

# 調査メモの観点

<!-- チームで開発していない場合でも、ソフトウェア開発以外の業務でも共通して言えることではありますが、とにかく文字に起こすことが重要だと思っています。

後に記述しますが、これはチームで開発している場合によりメリットがあるだろうと思うので、記事タイトルには「チーム開発で活きる」と表現しています。

文字にするうえで意識すべき観点をいかにまとめます。 -->


## 前提

今回は例として以下の問題を解決するために調査をし、ついでに解決のための実装もする際のログを参考までにまとめていきます。

- Cypress のテストレポートを生成し、クラウドストレージに保存したい
  - monorepo 構成のリポジトリになっており、CI は共通の workflow を利用している
  - すでに他のパッケージでは実装されている（はず）

## 調査をする目的を文字にする

調査に熱中してくると、本来の目的からそれたことまで調べてしまうことが（私は）よくあります。まず最初に目的を書いておきます。

```md: sample
- Cypress のテストレポートを生成し、クラウドストレージに保存する
```

## 箇条書きで事実をそのまま書く

文章として成り立たせるために労力を使うのがもったいないので、箇条書きで書くことを強くおすすめしたいです。

箇条書きは意識せずとも簡潔に書けるので、誰かが読ンダ時にも理解が容易だと思っています。

この時、箇条書きにした順番を下手に入れ換えない方が好ましいと思っています。実際の調査順が上から下に向かって羅列されている方が後に見返した時に思い出しやすいです。

また、自分にとって当たり前だろうと思うことでも、文字に起こすことが重要です。調査の序盤はとにかく事実を明らかにすることに努めます。

```diff md: sample
 - Cypress のテストレポートを生成し、クラウドストレージに保存する
+   - 他のパッケージは cypress-mochawesome-reporter を使ってテストのレポートを生成している
+     - 同じ形式が好ましいと思うので他のパッケージと同様の設定をした
+   - `github/workflows/foo.yaml` の `prepare artifact` が発火点
+     - そこで `bar.js` が実行されている
+       - `apps/foo/cypress/integration-test/**` を `root/artifacts/integration-test/**` にコピーしている
+         - 同じように `bar.js` に設定を追記した
```

## 仮説と検証を 1 セットで行う

ある程度事実が明らかになり、必要であろう実装をおこなってもなぜか動かない.. ということは（私は）よくあります。

その様なシーンに遭遇したなら、まずなぜ動いていないか仮説をたてます。

```diff md: sample
　- Cypress のテストレポートを生成し、クラウドストレージに保存する
　  - 他のパッケージは cypress-mochawesome-reporter を使ってテストのレポートを生成している
　    - 同じ形式が好ましいと思うので他のパッケージと同様の設定をした
　  - `github/workflows/foo.yaml` の `prepare artifact` が発火点
　    - そこで `bar.js` が実行されている
　      - `apps/foo/cypress/integration-test/**` を `root/artifacts/integration-test/**` にコピーしている
　        - 同じように `bar.js` に設定を追記した
+　          - しかし CI を実行しても対象のパッケージがアップロードされていないっぽい
+　          - 手元で `node bar.js` 実行してみる
+　            - `/artifacts` ディレクトリが作成されたけど、そもそも `integration-test` の中身がない
+　              - 他のパッケージの Cypress のテストレポートもコピーされていない
+　              - e2e 以外の unit test のレポートや storybook は意図したようにコピーされている
+　                - この間 Cypress のバージョンあげたのが関係する？
```

仮説を検証します。この時、自分がたてた仮説が間違っていたとしても必ず検証結果を書くことが重要であろうと思います。
間違っていたなら、次の仮説を立てて検証を繰り返します。

- Cypress のテストレポートを生成し、クラウドストレージに保存する
  - 他のパッケージは cypress-mochawesome-reporter を使ってテストのレポートを生成している
    - 同じ形式が好ましいと思うので他のパッケージと同様の設定をした
  - `github/workflows/foo.yaml` の `prepare artifact` が発火点
    - そこで `bar.js` が実行されている
      - `apps/foo/cypress/integration-test/**` を `root/artifacts/integration-test/**` にコピーしている
        - 同じように `bar.js` に設定を追記した
          - しかし CI を実行しても対象のパッケージがアップロードされていないっぽい
          - 手元で `node bar.js` 実行してみる
            - `/artifacts` ディレクトリが作成されたけど、そもそも `integration-test` の中身がない
              - 他のパッケージの Cypress のテストレポートもコピーされていない
              - e2e 以外の unit test のレポートや storybook は意図したようにコピーされている
                - この間 Cypress のバージョンあげたのが関係する？
                  - Cypress を 9 系から 10 系にあげていた
                  - `cypress.json` がサポートされなくなって `cypress.config.ts` に置き換わっていた
                    - `cypress.config.ts` に必要そうな記述を追記した
                    - 再度手元で `node bar.js` 実行するとコピーされた
                    - CI 実行してテストレポートがアップされた

# 調査メモのなにが嬉しいのか

## 調査を引き継げる

チームによっては、タスクを引き継ぐスタイルをとっていないかもしれませんが、チームのタスクは個人のタスクではないので、行き詰まったらパスしたりペアプロに切り替えたりすることもよくあると思います。

その際に、調査メモを残していると物凄く役にたちます。
これがログを残す最高のメリットといってもよいと思います。

自分が何を思って、何を調べて、どのように実装したのかを説明するのは難しいと思っているので。それが難し問題であればあるほど。

## 効果的に調査ができる

単純に自分が何を調べたか残せるので振り返ることができるのもメリットですが、特に仮説と検証を文字に起こすことで、脳みそを効果的に切り替えて調査することができます。

自分が今何をしようとしているのかが明確になっているのは想像以上に効果があると思います。

例えるなら、TDD のテストを書く時（仮説）と、テストを通すための実装をする時（検証）のイメージに近い気がする。

## お気持ちが安定する

調査のログが一応アウトプットとなりチームに共有することができるので、「1 日調査したのに何も分からんかった」となりません。

チームにとっては「分からんかった」と共有されるよりも、調査メモを共有してくれる人間の方が好まれるのは間違いないです。

## 将来同じような問題が発生した時に役立つ

まあ適切にドキュメント化をするのが良いのは間違いないですが、難しいことも多いので、作業ログを GitHub の Issue のコメントにペタッと貼っておくだけでも役に立つ可能性が高いですよね。

# さいごに

最後まで読んでいただきありがとうございました。わりと自己啓発？っぽい内容になってしまいましたが、思うところがあれば（優しめに）コメントいただけると嬉しいです。
